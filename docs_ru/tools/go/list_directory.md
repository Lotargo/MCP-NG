# Инструмент List Directory

## Описание

Инструмент `list_directory` — это gRPC-сервис на Go, который выводит список содержимого (файлов и подкаталогов) указанной директории в локальной файловой системе.

## Безопасность

В целях безопасности этот инструмент имеет встроенную защиту от атак типа "directory traversal". Он очищает предоставленный путь к файлу и отклоняет любой запрос, который пытается получить доступ к родительским каталогам с использованием `..`. Весь доступ к файлам ограничен рабочей директорией проекта.

## Параметры

Инструмент принимает один необязательный аргумент в виде JSON-объекта:

| Параметр | Тип      | Обязательный | По умолчанию | Описание                                                                                             |
|-----------|----------|--------------|--------------|------------------------------------------------------------------------------------------------------|
| `path`    | `string` | Нет          | `.`          | Путь к директории для листинга (например, `src/`). Если не указан, используется текущая рабочая директория. |

## Ответ

*   **Успешный листинг:** Если директория найдена, инструмент возвращает JSON-массив строк. Каждая строка — это имя файла или каталога.
    *   Подкаталоги будут иметь завершающий слэш (например, `my_folder/`).
    *   Файлы не будут иметь завершающего слэша (например, `my_file.txt`).
*   **Ошибка:** Если путь не существует или не является директорией, инструмент возвращает сообщение об ошибке.

## Пример использования

Вот пример использования инструмента `list_directory` для вывода содержимого директории `docs`.

**Запрос:**

```bash
curl -X POST http://localhost:8002/v1/tools:run \
-d '{
  "name": "list_directory",
  "arguments": {
    "path": "docs/"
  }
}'
```

**Успешный ответ:**

```json
{
  "result": {
    "listValue": {
      "values": [
        { "stringValue": "tools/" },
        { "stringValue": "integration_guide.md" }
      ]
    }
  }
}
```

## Конфигурация

Конфигурация инструмента управляется через файл `config.json`, расположенный в директории инструмента.

**Пример `config.json`:**
```json
{
  "port": 50057,
  "command": ["go", "run", "."]
}
```

*   `port`: Порт, на котором будет слушать gRPC-сервер инструмента.
*   `command`: Команда и аргументы для запуска инструмента.

## Проверки состояния и логирование

*   **Проверки состояния:** Этот инструмент реализует стандартный протокол gRPC Health Checking Protocol.
*   **Логирование:** Инструмент использует структурированный JSON-логгер (`slog`) для наблюдаемости.

## Тестирование

Для тестирования инструмента вы можете запустить предоставленные интеграционные тесты. Перейдите в директорию инструмента и выполните:
```bash
go test ./...
```